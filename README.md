# pquant

pquantR is a python and R package to perform downstream analysis of proteomicsLFQ quantitative data. It also included R shiny application which is designed to do the downstream analysis of proteomics dataset, currently these figures are included: Heatmap, Volcano Plot, QC plot.<br>

Because the application is in developing, the test figures are drawn by test R packages separately now.<br>

## Installation of environment

The `build.sh` bash script use conda and mamba to install the environment to install all the dependencies and packahes in python and R.

Prerequisites:

- conda (https://conda.io/projects/conda/en/latest/user-guide/install/index.html)
- mamba (https://github.com/mamba-org/mamba)

After the installation of conda and mamba you can run the following script:

```bash
$> source build.sh
```

## Shiny application

1. Preparing  for shiny app.<br>
* Download `ups1-uniprot-comet-proteomics_lfq.zip` from [this page](https://github.com/bigbio/pquant/issues/7), we need `out_msstats.csv` in this zip.<br>
* Download `shiny-app` folder from [this page](https://github.com/Douerww/pquantR/tree/main/shiny-app) and put it in a suitable working path.
2. Run `app.R` in the shiny-app folder, and you could run it in the following ways.<br>
* Use RStudio to open app.R file, and click the `Run App` button.<br>
* Or enter the following command in RStudio to run the shiny app:<br>
```r
setwd(getwd())  # The path where you store this R script
shiny::runApp('./shiny-app')
```
3. Click the `Browse` button to upload ‘out. CSV ‘file, then you can view the contents of the file, the resulting volcano map, heat map, and QC map through four different buttons in the shiny app.<br>
![](https://github.com/Douerww/pquantR/blob/main/img/data_eg.png)
![](https://github.com/Douerww/pquantR/blob/main/img/volcano_1_eg.png)
![](https://github.com/Douerww/pquantR/blob/main/img/heatmap_all_eg.png)
![](https://github.com/Douerww/pquantR/blob/main/img/qcPlot_1_eg.png)

## Current problems
1. All 3 plots are generated by the MSStats R package, and when we click plot button, getPlots.R will run again which make us feel stuck.
2. Cannot view all plots in Volcano and QC plot, because only one image can be viewed at a time in the window.
3. Because of the large number of proteins in our data and the long names, showing them in a volcano map would affect the effect.

## Todo list
1. Optimize the code so that users don't have to wait too long to see the results after input data.<br>
2. Consider adding interactive buttons in the volcano and QC boxes so that users can see all the generated plots in the same window.<br>
3. Consider not displaying the name in the future or change a R package.<br>
4. Add color descriptions to the heat map or change a R package.<br>
